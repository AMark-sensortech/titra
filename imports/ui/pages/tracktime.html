<template name="tracktime">
  <form>
    <div class="row form-group">
      {{#unless isEdit}}
        <div class="col-2">
            <label>&nbsp;</label>
            <button class="btn btn-secondary form-control js-previous"><i class="fa fa-chevron-left"></i></button>
        </div>
      {{/unless}}
      <div class="col">
        <label for="date">&nbsp;</label>
        <input id="date" type="date" class="form-control pl-2 pr-2 text-center" value="{{date}}">
      </div>
      {{#unless isEdit}}
        <div class="col-2 text-right">
            <label>&nbsp;</label>
            <button class="btn btn-secondary form-control js-next"><i class="fa fa-chevron-right"></i></button>
        </div>
      {{/unless}}
    </div>
    {{#unless isEdit}}
      <div class="card form-group">
        <div class="card-header js-toggle-timecards">
          {{#if totalTime}}
            Time tracked: {{timeInUserUnit(totalTime)}} {{timeunit}}
            <a href="#" class="text-dark"><i class="fa fa-chevron-down float-right"></i></a>
            {{else}}
            No time tracked yet.
          {{/if}}
        </div>
        {{#if totalTime}}
        <ul class="list-group list-group-flush d-none js-show-timecards">
            <li class="list-group-item">
              <div class="row">
                <div class="col-4 col-md-4"><strong>Project</strong></div>
                <div class="col-5 col-md-6"><strong>Task</strong></div>
                <div class="col-3 col-md-2"><strong>Time</strong></div>
              </div>
            </li>
              {{#each timecard in timecards}}
              <a href="#" class="list-group-item list-group-item-action js-time-row" data-toggle="popover" data-placement="bottom" data-title="Actions">
              <div class="d-none js-popover-content">
                <a class="btn btn-secondary" href="/edit/timecard/{{timecard._id}}">
                  <i class="fa fa-edit"></i>&nbsp;<span class="d-none d-md-inline-block">edit</span>
                </a>&nbsp;
                <button class="btn btn-secondary js-delete-time-entry" data-timecard-id="{{timecard._id}}">
                  <i class="fa fa-trash"></i>&nbsp;<span class="d-none d-md-inline-block">delete</span>
                </button>
              </div>
                <div class="row">
                  <div class="col-4 col-md-4"><span class="d-inline-block text-truncate" style="max-width:100%" data-toggle="tooltip" data-placement="top" title="{{projectName(timecard.projectId)}}">{{projectName(timecard.projectId)}}</span></div>
                  <div class="col-5 col-md-6"><span class="d-inline-block text-truncate" style="max-width:100%" data-toggle="tooltip" data-placement="top" title="{{timecard.task}}">{{timecard.task}}</span></div>
                  <div class="col-3 col-md-2 text-centered">{{timeInUserUnit(timecard.hours)}}</div>
                </div>
              </a>
              {{/each}}
          </ul>
        {{/if}}
      </div>
    {{/unless}}
    <div class="form-group">
      <label>Project</label>
      {{>projectselect}}
    </div>
    <div class="form-group">
      <label for="task">Task</label>
      {{>tasksearch}}
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col">
          <div class="form-group">
            <label for="hours">Working time ({{timeunit}})</label>
            <input id="hours" type="string" class="form-control" value="{{timeInUserUnit (hours)}}" placeholder="0.00"/>
          </div>
        </div>
        {{#unless isEdit}}
          {{#if showTracker}}
            <div class="col-md-3 col-6 text-right">
              <div class="form-group">
                <label>&nbsp;</label>
                  {{>timetracker}}
              </div>
            </div>
          {{/if}}
        {{/unless}}
      </div>
    </div>
    <div class="row">
      <div class="col-6 col-md-3 mr-auto">
        {{>backbutton}}
      </div>
      <div class="col-6 col-md-3">
        <button class="btn btn-primary form-control js-save">save</button>
      </div>
    </div>
  </form>
</template>


<template name="tracktimemain">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link {{showDay}} js-day" href="#">Day</a>
    </li>
    <li class="nav-item">
      <a class="nav-link {{showMonth}} js-month" href="#">Month</a>
    </li>
  </ul>
  {{#if showDay}}
    {{>tracktime}}
  {{/if}}
  {{#if showMonth}}
    {{>calendar}}
  {{/if}}
</template>
